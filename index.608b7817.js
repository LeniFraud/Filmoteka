function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},l=t.parcelRequired7c6;null==l&&((l=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var l={id:e,exports:{}};return n[e]=l,t.call(l.exports,l,l.exports),l.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){o[e]=t},t.parcelRequired7c6=l),l("krGWQ"),l("kzzqr"),l("b5rV1");var r=l("kzzqr"),a=l("lyvUQ");const s=document.querySelector(".gallery"),i=new(0,r.default),c=document.querySelector(".loader"),d=document.querySelector(".movies-gallery");async function u(){try{c.style.display="block",d.style.height="350px";const e=await i.fetchTrendingFilms(),t=await i.getGenres();e.results.forEach((e=>{e.genre_names=e.genre_ids.map((e=>t.find((({id:t})=>t===e)))).map((({name:e})=>e))})),s.innerHTML=(0,a.createMarkup)(e.results)}catch(e){console.log(e)}finally{c.style.display="none",d.style.height="auto"}}u();var g=l("fb9GJ");a=l("lyvUQ");const m=document.getElementById("tui-pagination-container"),y=document.querySelector(".gallery"),f={totalItems:2e4,page:1,itemsPerPage:20,visiblePages:5},p=new(e(g))(m,f);p.on("afterMove",(async function(e){return window.scrollTo({top:0,behavior:"smooth"}),f.page=e.page,i.page=e.page,null!==i.inputValue?await async function(){try{const e=await i.fetchSearchFilms(),t=await i.getGenres();return e.results.forEach((e=>{e.genre_names=e.genre_ids.map((e=>t.find((({id:t})=>t===e)))).map((({name:e})=>e))})),y.innerHTML=(0,a.createMarkup)(e.results),e}catch(e){console.log(e)}}():await u()})),i.fetchTrendingFilms().then((function({total_results:e}){f.totalItems=e,p.setTotalItems(e),m.classList.remove("visually-hidden")})).catch((e=>console.error(e)));a=l("lyvUQ");const h=document.querySelector(".header__form"),v=document.querySelector(".gallery"),E=document.querySelector(".header__form-warning-text"),b=document.querySelector(".loader");h.addEventListener("submit",(async e=>{e.preventDefault(),i.inputValue=e.target.elements.searchQuery.value.trim().toLowerCase(),i.page=1;try{b.style.display="block";const t=await i.fetchSearchFilms(),n=await i.getGenres();if(0===t.results.length)return e.target.reset(),p.setTotalItems(t.results.length),void E.classList.remove("visually-hidden");t.results.forEach((e=>{e.genre_names=e.genre_ids.map((e=>n.find((({id:t})=>t===e)))).map((({name:e})=>e))})),E.classList.add("visually-hidden"),v.innerHTML=(0,a.createMarkup)(t.results),p.movePageTo(1),f.page=1,p.setTotalItems(t.total_results),f.totalItems=t.total_results}catch(e){console.log(e)}finally{b.style.display="none"}})),l("bTcpz"),l("6HA5D"),l("I2Abx");const w={disableScroll(){document.body.classList.add("stop-scrolling")},enableScroll(){document.body.classList.remove("stop-scrolling")}},L={btnLoginOpenEl:document.querySelector(".login__btn"),btnOutEl:document.querySelector(".logout__btn"),btnCloseAutEl:document.querySelector('button[data-action="close"]'),loginBackdropEl:document.querySelector(".login-modal-backdrop"),loginModalEl:document.querySelector(".modal-container"),logoutBtnEl:document.querySelector(".nav-btn.logout__btn"),loginFormEl:document.querySelector(".modal-form.login"),registerFormEl:document.querySelector(".modal-form.register"),modalBtnEls:document.querySelectorAll('.modal-form button[data-action="toggle"]')};function S(){L.loginFormEl.classList.toggle("is-hidden"),L.registerFormEl.classList.toggle("is-hidden")}function _(){w.enableScroll(),L.loginBackdropEl.classList.toggle("is-hidden"),window.removeEventListener("keydown",q)}function q(e){"Escape"===e.code&&_()}L.modalBtnEls[0].addEventListener("click",S),L.modalBtnEls[1].addEventListener("click",S),L.btnLoginOpenEl.addEventListener("click",(function(){w.disableScroll(),L.loginBackdropEl.classList.toggle("is-hidden"),window.addEventListener("keydown",q)})),L.btnCloseAutEl.addEventListener("click",_),L.loginBackdropEl.addEventListener("click",(function(e){e.target===e.currentTarget&&_()}));
//# sourceMappingURL=index.608b7817.js.map
