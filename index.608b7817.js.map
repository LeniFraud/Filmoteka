{"mappings":"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","sources":["src/index.js","src/js/movies-markup.js","src/js/pagination.js","src/js/search-movie.js","src/js/stop-scrolling.js","src/js/userAuth/login-modal.js"],"sourcesContent":["import './js/refs';\nimport './js/movies-api';\nimport './js/local-storage';\nimport './js/movies-markup';\nimport './js/search-movie';\nimport './js/pagination';\nimport './js/modal';\nimport './js/footer-modal';\nimport './js/modal-trailer';\nimport './js/stop-scrolling';\nimport './js/userAuth/login-modal';\n","import TheMovieAPI from './movies-api';\nimport { createMarkup } from './cards-markup';\n\nconst container = document.querySelector('.gallery');\nexport const theMovieAPI = new TheMovieAPI();\nconst loader = document.querySelector('.loader');\nconst galleryContainer = document.querySelector('.movies-gallery');\n\nexport async function getData() {\n  try {\n    loader.style.display = 'block';\n    galleryContainer.style.height = '350px';\n    const movieInfo = await theMovieAPI.fetchTrendingFilms();\n    const genres = await theMovieAPI.getGenres();\n    movieInfo.results.forEach(film => {\n      film.genre_names = film.genre_ids\n        .map(filmId => genres.find(({ id }) => id === filmId))\n        .map(({ name }) => name);\n    });\n    container.innerHTML = createMarkup(movieInfo.results);\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loader.style.display = 'none';\n    galleryContainer.style.height = 'auto';\n  }\n}\ngetData();\n","import Pagination from 'tui-pagination';\nimport { getData, theMovieAPI } from './movies-markup';\nimport { createMarkup } from './cards-markup';\n\nconst pagination = document.getElementById('tui-pagination-container');\nconst container = document.querySelector('.gallery');\n\nexport const options = {\n  totalItems: 20000,\n  page: 1,\n  itemsPerPage: 20,\n  visiblePages: 5,\n};\nexport const instance = new Pagination(pagination, options);\ninstance.on('afterMove', changePage);\n\nfunction makePagination({ total_results: totalItems }) {\n  options.totalItems = totalItems;\n  instance.setTotalItems(totalItems);\n  pagination.classList.remove('visually-hidden');\n}\n\ntheMovieAPI\n  .fetchTrendingFilms()\n  .then(makePagination)\n  .catch(err => console.error(err));\n\n//onclick event (render new page)\nasync function changePage(eventData) {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n  options.page = eventData.page;\n  theMovieAPI.page = eventData.page;\n\n  if (theMovieAPI.inputValue !== null) {\n    return await renderFilmsPage();\n  }\n\n  return await getData();\n}\n\nasync function renderFilmsPage() {\n  try {\n    const movieInfo = await theMovieAPI.fetchSearchFilms();\n    const genres = await theMovieAPI.getGenres();\n    movieInfo.results.forEach(film => {\n      film.genre_names = film.genre_ids\n        .map(filmId => genres.find(({ id }) => id === filmId))\n        .map(({ name }) => name);\n    });\n    container.innerHTML = createMarkup(movieInfo.results);\n\n    return movieInfo;\n  } catch (error) {\n    console.log(error);\n  }\n}\n","import { theMovieAPI } from './movies-markup';\nimport { instance, options } from './pagination';\nimport { createMarkup, makeGenresList } from './cards-markup';\n\nconst searchFormEl = document.querySelector('.header__form');\nconst container = document.querySelector('.gallery');\nconst message = document.querySelector('.header__form-warning-text');\nconst loaderRef = document.querySelector('.loader');\n\nconst onSearchFormSubmit = async event => {\n  event.preventDefault();\n\n  theMovieAPI.inputValue = event.target.elements.searchQuery.value\n    .trim()\n    .toLowerCase();\n  theMovieAPI.page = 1;\n\n  try {\n    loaderRef.style.display = 'block';\n    const data = await theMovieAPI.fetchSearchFilms();\n    const genres = await theMovieAPI.getGenres();\n\n    if (data.results.length === 0) {\n      event.target.reset();\n      instance.setTotalItems(data.results.length);\n      message.classList.remove('visually-hidden');\n      return;\n    }\n\n    data.results.forEach(film => {\n      film.genre_names = film.genre_ids\n        .map(filmId => genres.find(({ id }) => id === filmId))\n        .map(({ name }) => name);\n    });\n\n    message.classList.add('visually-hidden');\n    container.innerHTML = createMarkup(data.results);\n\n    // event.target.reset();\n\n    //move pagination instance from selected =>to the first page on the new search\n    instance.movePageTo(1);\n    options.page = 1;\n\n    //change totalItems quantity\n    instance.setTotalItems(data.total_results);\n    options.totalItems = data.total_results;\n  } catch (err) {\n    console.log(err);\n  } finally {\n    loaderRef.style.display = 'none';\n  }\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n","export const scroll = {\n  disableScroll() {\n    document.body.classList.add(\"stop-scrolling\");\n  },\n\n  enableScroll() {\n    document.body.classList.remove(\"stop-scrolling\");\n  },\n};","import { scroll } from '../stop-scrolling';\n\nconst loginlRefs = {\n    // Login Modal\n    btnLoginOpenEl: document.querySelector('.login__btn'),\n    btnOutEl: document.querySelector('.logout__btn'),\n\n    btnCloseAutEl: document.querySelector('button[data-action=\"close\"]'),\n    loginBackdropEl: document.querySelector('.login-modal-backdrop'),\n    loginModalEl: document.querySelector('.modal-container'),\n    logoutBtnEl: document.querySelector('.nav-btn.logout__btn'),\n    loginFormEl: document.querySelector('.modal-form.login'),\n    registerFormEl: document.querySelector('.modal-form.register'),\n    modalBtnEls: document.querySelectorAll(\n        '.modal-form button[data-action=\"toggle\"]'\n    ),\n};\n\nloginlRefs.modalBtnEls[0].addEventListener('click', switchModals);\nloginlRefs.modalBtnEls[1].addEventListener('click', switchModals);\n\nloginlRefs.btnLoginOpenEl.addEventListener('click', openLoginModal);\nloginlRefs.btnCloseAutEl.addEventListener('click', closeLoginModal);\nloginlRefs.loginBackdropEl.addEventListener('click', onBackdropClick);\n\nfunction switchModals() {\n    loginlRefs.loginFormEl.classList.toggle('is-hidden');\n    loginlRefs.registerFormEl.classList.toggle('is-hidden');\n};\n\nfunction openLoginModal() {\n    scroll.disableScroll();\n    loginlRefs.loginBackdropEl.classList.toggle('is-hidden');\n    window.addEventListener('keydown', onEscPress);\n};\n\nfunction closeLoginModal() {\n    scroll.enableScroll();\n    loginlRefs.loginBackdropEl.classList.toggle('is-hidden');\n    window.removeEventListener('keydown', onEscPress);\n};\n\nfunction onEscPress(e) {\n    if (e.code === 'Escape') {\n        closeLoginModal();\n    }\n};\n\nfunction onBackdropClick(e) {\n    if (e.target === e.currentTarget) {\n        closeLoginModal();\n    }\n};\n"],"names":["parcelRequire","$kzzqr","$c5bf6fddc1c92729$var$container","document","querySelector","$c5bf6fddc1c92729$export$93053bb093350b36","default","$c5bf6fddc1c92729$var$loader","$c5bf6fddc1c92729$var$galleryContainer","async","$c5bf6fddc1c92729$export$7a171f172be0782e","style","display","height","movieInfo","fetchTrendingFilms","genres","getGenres","results","forEach","film","genre_names","genre_ids","map","filmId","find","id","name","innerHTML","$lyvUQ","createMarkup","error","console","log","$fb9GJ","$1bab9c519cfa82bc$var$pagination","getElementById","$1bab9c519cfa82bc$var$container","$1bab9c519cfa82bc$export$41c562ebe57d11e2","totalItems","page","itemsPerPage","visiblePages","$1bab9c519cfa82bc$export$9544d5bb712b01ea","$parcel$interopDefault","on","eventData","window","scrollTo","top","behavior","inputValue","fetchSearchFilms","$1bab9c519cfa82bc$var$renderFilmsPage","then","total_results","setTotalItems","classList","remove","catch","err","$71009b01fa8718e8$var$searchFormEl","$71009b01fa8718e8$var$container","$71009b01fa8718e8$var$message","$71009b01fa8718e8$var$loaderRef","addEventListener","event","preventDefault","target","elements","searchQuery","value","trim","toLowerCase","data","length","reset","add","movePageTo","$05238f464ac1a7a2$export$209876d7b1ac8f3","disableScroll","body","enableScroll","$d956f9503e4e8fdf$var$loginlRefs","btnLoginOpenEl","btnOutEl","btnCloseAutEl","loginBackdropEl","loginModalEl","logoutBtnEl","loginFormEl","registerFormEl","modalBtnEls","querySelectorAll","$d956f9503e4e8fdf$var$switchModals","toggle","$d956f9503e4e8fdf$var$closeLoginModal","removeEventListener","$d956f9503e4e8fdf$var$onEscPress","e","code","currentTarget"],"version":3,"file":"index.608b7817.js.map"}