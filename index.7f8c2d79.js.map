{"mappings":"iiBAAAA,EAAA,S,sBCAA,IAAAC,EAAAD,EAAA,S,uCAGME,EAAYC,SAASC,cAAc,YAC5BC,EAAc,IAAI,EAAAC,EAAAC,SACzBC,EAASL,SAASC,cAAc,WAChCK,EAAmBN,SAASC,cAAc,mB,SAE1BM,I,OAAAC,EAAOC,MAAAC,KAAAC,U,UAAPH,I,OAAAA,EAAfI,EAAAd,EAAA,CAAAc,EAAAC,GAAAC,MAAA,SAAAC,I,IAIGC,EACAC,E,kFAHNZ,EAAOa,MAAMC,QAAU,QACvBb,EAAiBY,MAAME,OAAS,Q,SACRlB,EAAYmB,qB,cAA9BL,EAASM,EAAAC,K,SACMrB,EAAYsB,Y,OAA3BP,EAAMK,EAAAC,KACZP,EAAUS,QAAQC,SAAQ,SAAAC,GACxBA,EAAKC,YAAcD,EAAKE,UACrBC,KAAI,SAAAC,G,OAAUd,EAAOe,MAAK,SAAAC,G,OAAKA,EAAFC,KAAgBH,C,OAC7CD,KAAI,SAAAG,G,OAAOA,EAAJE,I,OAEZpC,EAAUqC,WAAY,EAAAC,EAAAC,cAAatB,EAAUS,S,kDAE7Cc,QAAQC,IAAGlB,EAAAmB,I,yBAEXpC,EAAOa,MAAMC,QAAU,OACvBb,EAAiBY,MAAME,OAAS,O,8EAhBPX,MAAAC,KAAAC,U,CAmB7BJ,IC3BAT,EAAAD,EAAA,S,aCAAC,EAAAD,EAAA,S,aDAA,I,aCIM6C,G,aAAa1C,SAAS2C,eAAe,6BACrCC,EAAY5C,SAASC,cAAc,YAE5B4C,EAAU,CACrBC,WAAY,IACZC,KAAM,EACNC,aAAc,GACdC,aAAc,GAEHC,EAAW,IAAItC,EAAAuC,GAAJ,CAAeT,EAAYG,G,SAepCO,I,OAAAA,EAAfxC,EAAAd,EAAA,CAAAc,EAAAC,GAAAC,MAAA,SAAAC,EAA0BsC,G,qEACxBC,OAAOC,SAAS,CACdC,IAAK,EACLC,SAAU,WAEZZ,EAAQE,KAAOM,EAAUN,KACzB7C,EAAY6C,KAAOM,EAAUN,KAEE,OAA3B7C,EAAYwD,WAAmB,C,+BACpBC,I,sEAGFpD,I,6CAZUE,MAAAC,KAAAC,U,UAeVgD,I,OAAAC,EAAenD,MAAAC,KAAAC,U,UAAfiD,I,OAAAA,EAAfhD,EAAAd,EAAA,CAAAc,EAAAC,GAAAC,MAAA,SAAAC,I,IAEUC,EACAC,E,2FADkBf,EAAY2D,mB,cAA9B7C,EAASM,EAAAC,K,SACMrB,EAAYsB,Y,cAA3BP,EAAMK,EAAAC,KACZP,EAAUS,QAAQC,SAAQ,SAAAC,GACxBA,EAAKC,YAAcD,EAAKE,UACrBC,KAAI,SAAAC,G,OAAUd,EAAOe,MAAK,SAAAC,G,OAAKA,EAAFC,KAAgBH,C,OAC7CD,KAAI,SAAAG,G,OAAOA,EAAJE,I,OAEZS,EAAUR,WAAY,EAAAC,EAAAC,cAAatB,EAAUS,S,kBAEtCT,G,kCAEPuB,QAAQC,IAAGlB,EAAAmB,I,2DAbehC,MAAAC,KAAAC,U,CA7B9BuC,EAASY,GAAG,a,SAccT,G,OAAXD,EAAU3C,MAAAC,KAAAC,U,IANzBT,EACGmB,qBACA0C,MARH,SAAwB9B,G,IAAEa,EAAFb,EAAE+B,cACxBnB,EAAQC,WAAaA,EACrBI,EAASe,cAAcnB,GACvBJ,EAAWwB,UAAUC,OAAO,kB,IAM3BC,OAAM,SAAAC,G,OAAO9B,QAAQ+B,MAAMD,E,uBDrBxBE,EAAevE,SAASC,cAAc,iBACtCuE,EAAYxE,SAASC,cAAc,YACnCwE,EAAUzE,SAASC,cAAc,8BACjCyE,EAAY1E,SAASC,cAAc,WAEnC0E,G,EAAqB/D,EAAAd,EAAA,CAAAc,EAAAC,GAAAC,MAAA,SAAAC,EAAM6D,G,IAUvBC,EACA5D,E,yEAVR2D,EAAME,iBAEN5E,EAAYwD,WAAakB,EAAMG,OAAOC,SAASC,YAAYC,MACxDC,OACAC,cACHlF,EAAY6C,KAAO,E,SAGjB2B,EAAUxD,MAAMC,QAAU,Q,SACPjB,EAAY2D,mB,cAAzBgB,EAAIvD,EAAAC,K,UACWrB,EAAYsB,Y,WAA3BP,EAAMK,EAAAC,KAEgB,IAAxBsD,EAAKpD,QAAQ4D,OAAY,C,uBAC3BT,EAAMG,OAAOO,QACbpC,EAASe,cAAcY,EAAKpD,QAAQ4D,QACpCZ,EAAQP,UAAUC,OAAO,mB,2BAI3BU,EAAKpD,QAAQC,SAAQ,SAAAC,GACnBA,EAAKC,YAAcD,EAAKE,UACrBC,KAAI,SAAAC,G,OAAUd,EAAOe,MAAK,SAAAC,G,OAAKA,EAAFC,KAAgBH,C,OAC7CD,KAAI,SAAAG,G,OAAOA,EAAJE,I,OAGZsC,EAAQP,UAAUqB,IAAI,mBACtBf,EAAUpC,WAAY,EAAAC,EAAAC,cAAauC,EAAKpD,SAKxCyB,EAASsC,WAAW,GACpB3C,EAAQE,KAAO,EAGfG,EAASe,cAAcY,EAAKb,eAC5BnB,EAAQC,WAAa+B,EAAKb,c,kDAE1BzB,QAAQC,IAAGlB,EAAAmB,I,yBAEXiC,EAAUxD,MAAMC,QAAU,O,sFAzCGyD,G,iCA6CjCL,EAAakB,iBAAiB,SAAUd,G,iCEtDjC,IAAMe,EAAS,CACpBC,cAAA,WACE3F,SAAS4F,KAAK1B,UAAUqB,IAAI,iB,EAG9BM,aAAA,WACE7F,SAAS4F,KAAK1B,UAAUC,OAAO,iB,GCJ7B2B,EAAa,CAEfC,eAAgB/F,SAASC,cAAc,eACvC+F,SAAUhG,SAASC,cAAc,gBAEjCgG,cAAejG,SAASC,cAAc,+BACtCiG,gBAAiBlG,SAASC,cAAc,yBACxCkG,aAAcnG,SAASC,cAAc,oBACrCmG,YAAapG,SAASC,cAAc,wBACpCoG,YAAarG,SAASC,cAAc,qBACpCqG,eAAgBtG,SAASC,cAAc,wBACvCsG,YAAavG,SAASwG,iBAClB,6CAWR,SAASC,IACLX,EAAWO,YAAYnC,UAAUwC,OAAO,aACxCZ,EAAWQ,eAAepC,UAAUwC,OAAO,Y,CAS/C,SAASC,IACLjB,EAAOG,eACPC,EAAWI,gBAAgBhC,UAAUwC,OAAO,aAC5CpD,OAAOsD,oBAAoB,UAAWC,E,CAG1C,SAASA,EAAWC,GACD,WAAXA,EAAEC,MACFJ,G,CA1BRb,EAAWS,YAAY,GAAGd,iBAAiB,QAASgB,GACpDX,EAAWS,YAAY,GAAGd,iBAAiB,QAASgB,GAEpDX,EAAWC,eAAeN,iBAAiB,SAS3C,WACIC,EAAOC,gBACPG,EAAWI,gBAAgBhC,UAAUwC,OAAO,aAC5CpD,OAAOmC,iBAAiB,UAAWoB,E,IAXvCf,EAAWG,cAAcR,iBAAiB,QAASkB,GACnDb,EAAWI,gBAAgBT,iBAAiB,SAyB5C,SAAyBqB,GACjBA,EAAE/B,SAAW+B,EAAEE,eACfL,G","sources":["src/index.js","src/js/movies-markup.js","src/js/search-movie.js","src/js/pagination.js","src/js/stop-scrolling.js","src/js/userAuth/login-modal.js"],"sourcesContent":["import './js/refs';\nimport './js/movies-api';\nimport './js/local-storage';\nimport './js/movies-markup';\nimport './js/search-movie';\nimport './js/pagination';\nimport './js/modal';\nimport './js/footer-modal';\nimport './js/modal-trailer';\nimport './js/stop-scrolling';\nimport './js/userAuth/login-modal';\n","import TheMovieAPI from './movies-api';\nimport { createMarkup } from './cards-markup';\n\nconst container = document.querySelector('.gallery');\nexport const theMovieAPI = new TheMovieAPI();\nconst loader = document.querySelector('.loader');\nconst galleryContainer = document.querySelector('.movies-gallery');\n\nexport async function getData() {\n  try {\n    loader.style.display = 'block';\n    galleryContainer.style.height = '350px';\n    const movieInfo = await theMovieAPI.fetchTrendingFilms();\n    const genres = await theMovieAPI.getGenres();\n    movieInfo.results.forEach(film => {\n      film.genre_names = film.genre_ids\n        .map(filmId => genres.find(({ id }) => id === filmId))\n        .map(({ name }) => name);\n    });\n    container.innerHTML = createMarkup(movieInfo.results);\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loader.style.display = 'none';\n    galleryContainer.style.height = 'auto';\n  }\n}\ngetData();\n","import { theMovieAPI } from './movies-markup';\nimport { instance, options } from './pagination';\nimport { createMarkup, makeGenresList } from './cards-markup';\n\nconst searchFormEl = document.querySelector('.header__form');\nconst container = document.querySelector('.gallery');\nconst message = document.querySelector('.header__form-warning-text');\nconst loaderRef = document.querySelector('.loader');\n\nconst onSearchFormSubmit = async event => {\n  event.preventDefault();\n\n  theMovieAPI.inputValue = event.target.elements.searchQuery.value\n    .trim()\n    .toLowerCase();\n  theMovieAPI.page = 1;\n\n  try {\n    loaderRef.style.display = 'block';\n    const data = await theMovieAPI.fetchSearchFilms();\n    const genres = await theMovieAPI.getGenres();\n\n    if (data.results.length === 0) {\n      event.target.reset();\n      instance.setTotalItems(data.results.length);\n      message.classList.remove('visually-hidden');\n      return;\n    }\n\n    data.results.forEach(film => {\n      film.genre_names = film.genre_ids\n        .map(filmId => genres.find(({ id }) => id === filmId))\n        .map(({ name }) => name);\n    });\n\n    message.classList.add('visually-hidden');\n    container.innerHTML = createMarkup(data.results);\n\n    // event.target.reset();\n\n    //move pagination instance from selected =>to the first page on the new search\n    instance.movePageTo(1);\n    options.page = 1;\n\n    //change totalItems quantity\n    instance.setTotalItems(data.total_results);\n    options.totalItems = data.total_results;\n  } catch (err) {\n    console.log(err);\n  } finally {\n    loaderRef.style.display = 'none';\n  }\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n","import Pagination from 'tui-pagination';\nimport { getData, theMovieAPI } from './movies-markup';\nimport { createMarkup } from './cards-markup';\n\nconst pagination = document.getElementById('tui-pagination-container');\nconst container = document.querySelector('.gallery');\n\nexport const options = {\n  totalItems: 20000,\n  page: 1,\n  itemsPerPage: 20,\n  visiblePages: 5,\n};\nexport const instance = new Pagination(pagination, options);\ninstance.on('afterMove', changePage);\n\nfunction makePagination({ total_results: totalItems }) {\n  options.totalItems = totalItems;\n  instance.setTotalItems(totalItems);\n  pagination.classList.remove('visually-hidden');\n}\n\ntheMovieAPI\n  .fetchTrendingFilms()\n  .then(makePagination)\n  .catch(err => console.error(err));\n\n//onclick event (render new page)\nasync function changePage(eventData) {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n  options.page = eventData.page;\n  theMovieAPI.page = eventData.page;\n\n  if (theMovieAPI.inputValue !== null) {\n    return await renderFilmsPage();\n  }\n\n  return await getData();\n}\n\nasync function renderFilmsPage() {\n  try {\n    const movieInfo = await theMovieAPI.fetchSearchFilms();\n    const genres = await theMovieAPI.getGenres();\n    movieInfo.results.forEach(film => {\n      film.genre_names = film.genre_ids\n        .map(filmId => genres.find(({ id }) => id === filmId))\n        .map(({ name }) => name);\n    });\n    container.innerHTML = createMarkup(movieInfo.results);\n\n    return movieInfo;\n  } catch (error) {\n    console.log(error);\n  }\n}\n","export const scroll = {\n  disableScroll() {\n    document.body.classList.add(\"stop-scrolling\");\n  },\n\n  enableScroll() {\n    document.body.classList.remove(\"stop-scrolling\");\n  },\n};","import { scroll } from '../stop-scrolling';\n\nconst loginlRefs = {\n    // Login Modal\n    btnLoginOpenEl: document.querySelector('.login__btn'),\n    btnOutEl: document.querySelector('.logout__btn'),\n\n    btnCloseAutEl: document.querySelector('button[data-action=\"close\"]'),\n    loginBackdropEl: document.querySelector('.login-modal-backdrop'),\n    loginModalEl: document.querySelector('.modal-container'),\n    logoutBtnEl: document.querySelector('.nav-btn.logout__btn'),\n    loginFormEl: document.querySelector('.modal-form.login'),\n    registerFormEl: document.querySelector('.modal-form.register'),\n    modalBtnEls: document.querySelectorAll(\n        '.modal-form button[data-action=\"toggle\"]'\n    ),\n};\n\nloginlRefs.modalBtnEls[0].addEventListener('click', switchModals);\nloginlRefs.modalBtnEls[1].addEventListener('click', switchModals);\n\nloginlRefs.btnLoginOpenEl.addEventListener('click', openLoginModal);\nloginlRefs.btnCloseAutEl.addEventListener('click', closeLoginModal);\nloginlRefs.loginBackdropEl.addEventListener('click', onBackdropClick);\n\nfunction switchModals() {\n    loginlRefs.loginFormEl.classList.toggle('is-hidden');\n    loginlRefs.registerFormEl.classList.toggle('is-hidden');\n};\n\nfunction openLoginModal() {\n    scroll.disableScroll();\n    loginlRefs.loginBackdropEl.classList.toggle('is-hidden');\n    window.addEventListener('keydown', onEscPress);\n};\n\nfunction closeLoginModal() {\n    scroll.enableScroll();\n    loginlRefs.loginBackdropEl.classList.toggle('is-hidden');\n    window.removeEventListener('keydown', onEscPress);\n};\n\nfunction onEscPress(e) {\n    if (e.code === 'Escape') {\n        closeLoginModal();\n    }\n};\n\nfunction onBackdropClick(e) {\n    if (e.target === e.currentTarget) {\n        closeLoginModal();\n    }\n};\n"],"names":["parcelRequire","$bpxeT","$bc489782f8674b12$var$container","document","querySelector","$bc489782f8674b12$export$93053bb093350b36","$jlbHq","default","$bc489782f8674b12$var$loader","$bc489782f8674b12$var$galleryContainer","$bc489782f8674b12$export$7a171f172be0782e","$bc489782f8674b12$var$_getData","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","movieInfo","genres","style","display","height","fetchTrendingFilms","_ctx","sent","getGenres","results","forEach","film","genre_names","genre_ids","map","filmId","find","param","id","name","innerHTML","$latFS","createMarkup","console","log","t0","$dfaf77c789ce7a24$var$pagination","getElementById","$dfaf77c789ce7a24$var$container","$dfaf77c789ce7a24$export$41c562ebe57d11e2","totalItems","page","itemsPerPage","visiblePages","$dfaf77c789ce7a24$export$9544d5bb712b01ea","$1VFfL","$dfaf77c789ce7a24$var$_changePage","eventData","window","scrollTo","top","behavior","inputValue","$dfaf77c789ce7a24$var$renderFilmsPage","$dfaf77c789ce7a24$var$_renderFilmsPage","fetchSearchFilms","on","then","total_results","setTotalItems","classList","remove","catch","err","error","$49fc2524958c817c$var$searchFormEl","$49fc2524958c817c$var$container","$49fc2524958c817c$var$message","$49fc2524958c817c$var$loaderRef","$49fc2524958c817c$var$onSearchFormSubmit","event","data","preventDefault","target","elements","searchQuery","value","trim","toLowerCase","length","reset","add","movePageTo","addEventListener","$8b790abf779450ce$export$209876d7b1ac8f3","disableScroll","body","enableScroll","$f0f962bc62f3b6a8$var$loginlRefs","btnLoginOpenEl","btnOutEl","btnCloseAutEl","loginBackdropEl","loginModalEl","logoutBtnEl","loginFormEl","registerFormEl","modalBtnEls","querySelectorAll","$f0f962bc62f3b6a8$var$switchModals","toggle","$f0f962bc62f3b6a8$var$closeLoginModal","removeEventListener","$f0f962bc62f3b6a8$var$onEscPress","e","code","currentTarget"],"version":3,"file":"index.7f8c2d79.js.map"}