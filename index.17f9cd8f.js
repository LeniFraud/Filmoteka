!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},o=t.parcelRequired7c6;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){r[e]=t},t.parcelRequired7c6=o),o("4Nugj"),o("jlbHq"),o("4LMMA");var l=o("bpxeT"),a=o("2TvXO"),s=o("jlbHq"),c=o("latFS"),u=document.querySelector(".gallery"),i=new(0,s.default),d=document.querySelector(".loader"),p=document.querySelector(".movies-gallery");function f(){return m.apply(this,arguments)}function m(){return(m=e(l)(e(a).mark((function t(){var n,r;return e(a).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d.style.display="block",p.style.height="350px",e.next=5,i.fetchTrendingFilms();case 5:return n=e.sent,e.next=8,i.getGenres();case 8:r=e.sent,n.results.forEach((function(e){e.genre_names=e.genre_ids.map((function(e){return r.find((function(t){return t.id===e}))})).map((function(e){return e.name}))})),u.innerHTML=(0,c.createMarkup)(n.results),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:return e.prev=16,d.style.display="none",p.style.height="auto",e.finish(16);case 20:case"end":return e.stop()}}),t,null,[[0,13,16,20]])})))).apply(this,arguments)}f();l=o("bpxeT"),a=o("2TvXO"),l=o("bpxeT"),a=o("2TvXO");var g=o("1VFfL"),y=(c=o("latFS"),document.getElementById("tui-pagination-container")),v=document.querySelector(".gallery"),h={totalItems:2e4,page:1,itemsPerPage:20,visiblePages:5},b=new(e(g))(y,h);function E(){return(E=e(l)(e(a).mark((function t(n){return e(a).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.scrollTo({top:0,behavior:"smooth"}),h.page=n.page,i.page=n.page,null===i.inputValue){e.next=7;break}return e.next=6,w();case 6:case 9:return e.abrupt("return",e.sent);case 7:return e.next=9,f();case 10:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function w(){return x.apply(this,arguments)}function x(){return(x=e(l)(e(a).mark((function t(){var n,r;return e(a).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.fetchSearchFilms();case 3:return n=e.sent,e.next=6,i.getGenres();case 6:return r=e.sent,n.results.forEach((function(e){e.genre_names=e.genre_ids.map((function(e){return r.find((function(t){return t.id===e}))})).map((function(e){return e.name}))})),v.innerHTML=(0,c.createMarkup)(n.results),e.abrupt("return",n);case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}b.on("afterMove",(function(e){return E.apply(this,arguments)})),i.fetchTrendingFilms().then((function(e){var t=e.total_results;h.totalItems=t,b.setTotalItems(t),y.classList.remove("visually-hidden")})).catch((function(e){return console.error(e)}));c=o("latFS");var S,L=document.querySelector(".header__form"),k=document.querySelector(".gallery"),_=document.querySelector(".header__form-warning-text"),q=document.querySelector(".loader"),T=(S=e(l)(e(a).mark((function t(n){var r,o;return e(a).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),i.inputValue=n.target.elements.searchQuery.value.trim().toLowerCase(),i.page=1,e.prev=3,q.style.display="block",e.next=7,i.fetchSearchFilms();case 7:return r=e.sent,e.next=10,i.getGenres();case 10:if(o=e.sent,b.setTotalItems(r.total_results),0!==r.results.length){e.next=17;break}return n.target.reset(),b.setTotalItems(r.results.length),_.classList.remove("visually-hidden"),e.abrupt("return");case 17:r.results.forEach((function(e){e.genre_names=e.genre_ids.map((function(e){return o.find((function(t){return t.id===e}))})).map((function(e){return e.name}))})),_.classList.add("visually-hidden"),k.innerHTML=(0,c.createMarkup)(r.results),b.movePageTo(1),h.page=1,b.setTotalItems(r.total_results),h.totalItems=r.total_results,e.next=29;break;case 26:e.prev=26,e.t0=e.catch(3),console.log(e.t0);case 29:return e.prev=29,q.style.display="none",e.finish(29);case 32:case"end":return e.stop()}}),t,null,[[3,26,29,32]])}))),function(e){return S.apply(this,arguments)});L.addEventListener("submit",T),o("5xtVg"),o("4F07H"),o("ijwS8");var F={disableScroll:function(){document.body.classList.add("stop-scrolling")},enableScroll:function(){document.body.classList.remove("stop-scrolling")}},M={btnLoginOpenEl:document.querySelector(".login__btn"),btnOutEl:document.querySelector(".logout__btn"),btnCloseAutEl:document.querySelector('button[data-action="close"]'),loginBackdropEl:document.querySelector(".login-modal-backdrop"),loginModalEl:document.querySelector(".modal-container"),logoutBtnEl:document.querySelector(".nav-btn.logout__btn"),loginFormEl:document.querySelector(".modal-form.login"),registerFormEl:document.querySelector(".modal-form.register"),modalBtnEls:document.querySelectorAll('.modal-form button[data-action="toggle"]')};function B(){M.loginFormEl.classList.toggle("is-hidden"),M.registerFormEl.classList.toggle("is-hidden")}function O(){F.enableScroll(),M.loginBackdropEl.classList.toggle("is-hidden"),window.removeEventListener("keydown",I)}function I(e){"Escape"===e.code&&O()}M.modalBtnEls[0].addEventListener("click",B),M.modalBtnEls[1].addEventListener("click",B),M.btnLoginOpenEl.addEventListener("click",(function(){F.disableScroll(),M.loginBackdropEl.classList.toggle("is-hidden"),window.addEventListener("keydown",I)})),M.btnCloseAutEl.addEventListener("click",O),M.loginBackdropEl.addEventListener("click",(function(e){e.target===e.currentTarget&&O()}))}();
//# sourceMappingURL=index.17f9cd8f.js.map
